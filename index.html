<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulate Boreal Caribou Survival, Recruitment and Population Growth • bbousims</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Simulate Boreal Caribou Survival, Recruitment and Population Growth">
<meta property="og:description" content="Simulates survival and recruitment data for boreal caribou populations using hierarchical Bayesian models.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">bbousims</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/caribou.html">Simulate Boreal Caribou survival and recruitment data</a>
    </li>
    <li>
      <a href="articles/general.html">Simulate population from birth and survival rates and assign groups</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/poissonconsulting/bboutools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="bbousims">bbousims<a class="anchor" aria-label="anchor" href="#bbousims"></a>
</h1></div>
<!-- badges: start -->

<p><code>bbousims</code> contains some general functionality for simulating population change of life stages over time from survival, ageing and birth processes.</p>
<p>In addition, there are more user-friendly functions for simulating Boreal Caribou population change, recruitment data from hypothetical composition surveys and survival data from hypothetical collaring.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of bbousims from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"poissonconsulting/bbousims"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="general-tools-for-simulating-populations-from-survival-ageing-and-birth">General tools for simulating populations from survival, ageing and birth<a class="anchor" aria-label="anchor" href="#general-tools-for-simulating-populations-from-survival-ageing-and-birth"></a>
</h2>
<div class="section level3">
<h3 id="survival-and-fecundity-rates">Survival and fecundity rates<a class="anchor" aria-label="anchor" href="#survival-and-fecundity-rates"></a>
</h3>
<p><code><a href="reference/bbs_survival.html">bbs_survival()</a></code> and <code><a href="reference/bbs_fecundity.html">bbs_fecundity()</a></code> can be used to stochastically generate survival and fecundity rates over time. Survival varies by period (e.g., month, season) with options to set the intercept, year trend, annual random effect, period random effect and period within annual random effect for each stage, on the log-odds scale.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">survival</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bbs_survival.html">bbs_survival</a></span><span class="op">(</span>intercept <span class="op">=</span> <span class="fu"><a href="https://poissonconsulting.github.io/extras/reference/logit.html" class="external-link">logit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.94</span>, <span class="fl">0.98</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                         trend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>                         annual_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                         period_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                         nyear <span class="op">=</span> <span class="fl">3</span>, </span>
<span>                         nperiod_within_year <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">survival</span></span>
<span><span class="co">#&gt; , , 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;           [,1]      [,2]      [,3]</span></span>
<span><span class="co">#&gt; [1,] 0.9428551 0.9384019 0.9432026</span></span>
<span><span class="co">#&gt; [2,] 0.9397805 0.9351042 0.9401455</span></span>
<span><span class="co">#&gt; [3,] 0.9355031 0.9305192 0.9358923</span></span>
<span><span class="co">#&gt; [4,] 0.9487064 0.9446824 0.9490202</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; , , 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;           [,1]      [,2]      [,3]</span></span>
<span><span class="co">#&gt; [1,] 0.9801348 0.9837630 0.9899028</span></span>
<span><span class="co">#&gt; [2,] 0.9775668 0.9816552 0.9885828</span></span>
<span><span class="co">#&gt; [3,] 0.9791850 0.9829836 0.9894149</span></span>
<span><span class="co">#&gt; [4,] 0.9796768 0.9833872 0.9896676</span></span></code></pre></div>
<p>Fecundity varies by year, with options to set the intercept, year trend and annual random effect for each stage, on the log-odds scale. Setting intercept to NA will force all rates in that stage to be 0.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fecundity</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bbs_fecundity.html">bbs_fecundity</a></span><span class="op">(</span>intercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fu"><a href="https://poissonconsulting.github.io/extras/reference/logit.html" class="external-link">logit</a></span><span class="op">(</span><span class="fl">0.4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                           trend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="op">-</span><span class="fl">0.2</span><span class="op">)</span>,</span>
<span>                           annual_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>                           nyear <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">fecundity</span></span>
<span><span class="co">#&gt;      [,1]      [,2]</span></span>
<span><span class="co">#&gt; [1,]    0 0.3477818</span></span>
<span><span class="co">#&gt; [2,]    0 0.3037460</span></span>
<span><span class="co">#&gt; [3,]    0 0.3347985</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="process-matrices">Process matrices<a class="anchor" aria-label="anchor" href="#process-matrices"></a>
</h3>
<p>Survival and fecundity rate arrays can be converted into process matrices for use in BAS population projection. In this example there are two stages representing recruit and adult.<br><code>male_recruit_stage</code> is set to NULL to indicate that there is only one recruit stage.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">survival_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bbs_matrix_survival_period.html">bbs_matrix_survival_period</a></span><span class="op">(</span><span class="va">survival</span><span class="op">)</span></span>
<span><span class="va">birth_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bbs_matrix_birth_year.html">bbs_matrix_birth_year</a></span><span class="op">(</span><span class="va">fecundity</span>, female_recruit_stage <span class="op">=</span> <span class="fl">1</span>, male_recruit_stage <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="co"># first period, first year</span></span>
<span><span class="va">survival_mat</span><span class="op">[</span>,,<span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">#&gt;           [,1]      [,2]</span></span>
<span><span class="co">#&gt; [1,] 0.9428551 0.0000000</span></span>
<span><span class="co">#&gt; [2,] 0.0000000 0.9801348</span></span>
<span></span>
<span><span class="co"># first year</span></span>
<span><span class="va">birth_mat</span><span class="op">[</span>,,<span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">#&gt;      [,1]      [,2]</span></span>
<span><span class="co">#&gt; [1,]    1 0.1738909</span></span>
<span><span class="co">#&gt; [2,]    0 1.0000000</span></span></code></pre></div>
<p><code><a href="reference/bbs_matrix_age.html">bbs_matrix_age()</a></code> is used to generate an age process matrix, which does not vary in time. The input vector denotes which stage that stage will age into (i.e., stage 1 ages to stage 2, stage 2 collects).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bbs_matrix_age.html">bbs_matrix_age</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">age_mat</span></span>
<span><span class="co">#&gt;      [,1] [,2]</span></span>
<span><span class="co">#&gt; [1,]    0    0</span></span>
<span><span class="co">#&gt; [2,]    1    1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="population-projection">Population projection<a class="anchor" aria-label="anchor" href="#population-projection"></a>
</h3>
<p><code>bbousims</code> contains a custom infix operator <code>%*b%</code> to perform matrix multiplication with stochasticity. Instead of multiplying the population at each stage by the corresponding rate, <code>%*b%</code> draws from a binomial distribution, where size is the population and probability is the rate of interest.</p>
<p>For example, with an initial population vector and survival process matrix for the first period of the first year</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pop0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">52</span><span class="op">)</span></span>
<span><span class="va">survival_mat1</span> <span class="op">&lt;-</span> <span class="va">survival_mat</span><span class="op">[</span>,,<span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<p>regular (deterministic) matrix multiplication yields</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">survival_mat1</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="va">pop0</span></span>
<span><span class="co">#&gt;          [,1]</span></span>
<span><span class="co">#&gt; [1,] 23.57138</span></span>
<span><span class="co">#&gt; [2,] 50.96701</span></span></code></pre></div>
<p>and stochastic matrix multiplication yields</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">survival_mat1</span> <span class="op"><a href="reference/grapes-times-b-grapes.html">%*b%</a></span> <span class="va">pop0</span></span>
<span><span class="co">#&gt; [1] 24 49</span></span></code></pre></div>
<p><code><a href="reference/bbs_population.html">bbs_population()</a></code> is used to project population forward in time from survival, age and birth process matrices.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">population</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bbs_population.html">bbs_population</a></span><span class="op">(</span><span class="va">pop0</span>, </span>
<span>                             birth <span class="op">=</span> <span class="va">birth_mat</span>, </span>
<span>                             age <span class="op">=</span> <span class="va">age_mat</span>, </span>
<span>                             survival <span class="op">=</span> <span class="va">survival_mat</span><span class="op">)</span></span>
<span><span class="va">population</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]</span></span>
<span><span class="co">#&gt; [1,]   25   21   20   18   24   22   20   20   13    13    13    10    16</span></span>
<span><span class="co">#&gt; [2,]   52   51   48   48   65   63   61   60   79    78    77    77    87</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="group-allocation">Group allocation<a class="anchor" aria-label="anchor" href="#group-allocation"></a>
</h3>
<p><code><a href="reference/bbs_population_groups.html">bbs_population_groups()</a></code> is used to randomly allocate individuals at each time step into groups. Group sizes are randomly drawn from a gamma-poisson distribution with user-specified <code>lambda</code> and <code>theta</code> (dispersion parameter) values. Minimum and maximum (i.e., as a maximum proportion of the total population) groups sizes can be set. Group sizes are drawn until the cumulative size exceeds the total individuals. The remaining individuals comprise the final group. If the remaining number of individuals is &lt; minimum group size specified by the user, these will be added to the previous group.</p>
<p>The output is a list of lists containing the individuals (identified by stage) in each group at each time period.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bbs_population_groups.html">bbs_population_groups</a></span><span class="op">(</span><span class="va">population</span>, group_size_lambda <span class="op">=</span> <span class="fl">20</span>, group_size_theta <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># first time period</span></span>
<span><span class="va">groups</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt;  [1] 2 1 1 1 1 2 2 1 2 1 2 2 1 2 2 2 2 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt;  [1] 1 2 2 2 2 2 2 1 2 2 2 2 2 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt;  [1] 2 1 2 1 2 1 1 2 2 2 1 2 1 2 2 2 2 2 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[4]]</span></span>
<span><span class="co">#&gt;  [1] 1 1 1 1 2 2 1 1 2 2 2 2 1 1 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[5]]</span></span>
<span><span class="co">#&gt;  [1] 2 2 2 2 1 2 2 2 1 2 2</span></span></code></pre></div>
<p><code><a href="reference/bbs_population_groups_pairs.html">bbs_population_groups_pairs()</a></code> behaves similarly but keeps calf-cow pairs (or equivalent for different animals) together in groups whenever possible.</p>
<p><code><a href="reference/bbs_population_groups_survey.html">bbs_population_groups_survey()</a></code> allocates individuals into groups once a year (month of composition survey relative to biological year start) and allows the user to set the sample coverage (i.e., the proportion of groups observed). Groups are sampled randomly.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bbs_population_groups_survey.html">bbs_population_groups_survey</a></span><span class="op">(</span><span class="va">population</span>, group_size_lambda <span class="op">=</span> <span class="fl">20</span>, month_composition <span class="op">=</span> <span class="fl">3L</span>, group_coverage <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># sampled groups in first time period</span></span>
<span><span class="va">groups</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1] 2 2 2 2 2 2 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [1] 2 1 2 2</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="boreal-caribou-simulation">Boreal Caribou simulation<a class="anchor" aria-label="anchor" href="#boreal-caribou-simulation"></a>
</h2>
<p>More user-friendly functionality exists for simulating Boreal Caribou population, where it is assumed that there are six stages: female calf, male calf, female yearling, male yearling, female adult and male adult.</p>
<div class="section level3">
<h3 id="boreal-caribou-population-projection">Boreal Caribou population projection<a class="anchor" aria-label="anchor" href="#boreal-caribou-population-projection"></a>
</h3>
<p>The survival/fecundity rates are generated for the female stages and population is projected for those stages. Abundance at each male stage is ‘filled in’ based on provided sex ratios. The initial population vector is determined by calculating stable stage distribution. Given key parameters, <code><a href="reference/bbs_demographic_summary.html">bbs_demographic_summary()</a></code> provides stable stage distribution, estimated lambda, estimated recruitment and calf-cow ratio.</p>
<p><code><a href="reference/bbs_survival_caribou.html">bbs_survival_caribou()</a></code> and <code><a href="reference/bbs_fecundity_caribou.html">bbs_fecundity_caribou()</a></code> are used to generate rates varying over time.</p>
<p><code><a href="reference/bbs_population_caribou.html">bbs_population_caribou()</a></code> allows the user to set the intercept, trend, annual random effect standard deviation, monthly random effect standard deviation and month within annual random effect standard deviation for female adult survival and female calf survival separately. Yearling abundance is determined from a user-specified effect on female adult survival (<code>yearling_effect</code>). Intercept, trend and annual random effect standard deviation can also be set for the calves per adult female (<code>calves_per_adut_female</code>).</p>
<p>In all cases, the intercept (i.e., <code>survival_adult_female</code>, <code>survival_calf_female</code> <code>calves_per_adult_female</code>) is the annual rate and trend/standard deviations are on the log-odds scale. Year is scaled to (Year - 1) so that the intercept represents the rate in the first year.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">population</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bbs_population_caribou.html">bbs_population_caribou</a></span><span class="op">(</span>nyear <span class="op">=</span> <span class="fl">50</span>, </span>
<span>                                     survival_adult_female <span class="op">=</span> <span class="fl">0.85</span>,</span>
<span>                                     survival_calf_female <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>                                     calves_per_adult_female <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/bbs_plot_population.html">bbs_plot_population</a></span><span class="op">(</span><span class="va">population</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-12-1.png" width="100%"> As an example, adding a negative trend and high standard deviation of the annual random effect in the adult female survival will cause higher variation and downward projection of population.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">population</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bbs_population_caribou.html">bbs_population_caribou</a></span><span class="op">(</span>nyear <span class="op">=</span> <span class="fl">50</span>, </span>
<span>                                     survival_adult_female <span class="op">=</span> <span class="fl">0.85</span>,</span>
<span>                                     survival_calf_female <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>                                     calves_per_adult_female <span class="op">=</span> <span class="fl">0.7</span>, </span>
<span>                                     survival_trend_adult_female <span class="op">=</span> <span class="op">-</span><span class="fl">0.01</span>,</span>
<span>                                     survival_annual_sd_adult_female <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/bbs_plot_population.html">bbs_plot_population</a></span><span class="op">(</span><span class="va">population</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-13-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="boreal-caribou-survival-and-recruitment-data">Boreal Caribou survival and recruitment data<a class="anchor" aria-label="anchor" href="#boreal-caribou-survival-and-recruitment-data"></a>
</h3>
<p><code><a href="reference/bbs_simulate_caribou.html">bbs_simulate_caribou()</a></code> combines <code><a href="reference/bbs_population_caribou.html">bbs_population_caribou()</a></code>, <code><a href="reference/bbs_population_groups_survey.html">bbs_population_groups_survey()</a></code> and <code><a href="reference/bbs_survival_collared.html">bbs_survival_collared()</a></code> functionality to simulate recruitment data from composition surveys and survival data from collaring. Recruitment and survival data share the same survival rates, which are generated once at the start of the <code><a href="reference/bbs_simulate_caribou.html">bbs_simulate_caribou()</a></code> function.</p>
<p>The recruitment and survival data are formatted to be used as input for <code>bboutools</code> model fitting functions.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bbs_simulate_caribou.html">bbs_simulate_caribou</a></span><span class="op">(</span>nyear <span class="op">=</span> <span class="fl">30</span>, </span>
<span>                             adult_females <span class="op">=</span> <span class="fl">500</span>,</span>
<span>                             survival_adult_female <span class="op">=</span> <span class="fl">0.85</span>,</span>
<span>                             survival_calf_female <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>                             calves_per_adult_female <span class="op">=</span> <span class="fl">0.7</span>, </span>
<span>                             survival_trend_calf_female <span class="op">=</span> <span class="op">-</span><span class="fl">0.01</span>,</span>
<span>                             group_size <span class="op">=</span> <span class="fl">15</span>,</span>
<span>                             group_coverage <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>                             collared_adult_females <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">survival</span></span>
<span><span class="co">#&gt; # A tibble: 360 × 6</span></span>
<span><span class="co">#&gt;     Year Month PopulationName StartTotal MortalitiesCertain MortalitiesUncertain</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;int&gt; &lt;chr&gt;               &lt;dbl&gt;              &lt;int&gt;                &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1     1     1 A                      30                  0                    0</span></span>
<span><span class="co">#&gt;  2     1     2 A                      30                  0                    0</span></span>
<span><span class="co">#&gt;  3     1     3 A                      30                  0                    0</span></span>
<span><span class="co">#&gt;  4     1     4 A                      30                  0                    0</span></span>
<span><span class="co">#&gt;  5     1     5 A                      30                  0                    0</span></span>
<span><span class="co">#&gt;  6     1     6 A                      30                  0                    0</span></span>
<span><span class="co">#&gt;  7     1     7 A                      30                  0                    0</span></span>
<span><span class="co">#&gt;  8     1     8 A                      30                  0                    0</span></span>
<span><span class="co">#&gt;  9     1     9 A                      30                  0                    0</span></span>
<span><span class="co">#&gt; 10     1    10 A                      30                  0                    0</span></span>
<span><span class="co">#&gt; # ℹ 350 more rows</span></span>
<span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">recruitment</span></span>
<span><span class="co">#&gt; # A tibble: 509 × 9</span></span>
<span><span class="co">#&gt;     Year Month PopulationName   Day  Cows Bulls Yearlings Calves UnknownAdults</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;int&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;  &lt;int&gt;         &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1     1     9 A                  1     5     4         3      1             0</span></span>
<span><span class="co">#&gt;  2     1     9 A                  1     4     4         2      2             0</span></span>
<span><span class="co">#&gt;  3     1     9 A                  1     6     2         5      5             0</span></span>
<span><span class="co">#&gt;  4     1     9 A                  1     7     1         5      5             0</span></span>
<span><span class="co">#&gt;  5     1     9 A                  1    10     4         1      1             0</span></span>
<span><span class="co">#&gt;  6     1     9 A                  1     3     4         1      6             0</span></span>
<span><span class="co">#&gt;  7     1     9 A                  1    11     9         0      5             0</span></span>
<span><span class="co">#&gt;  8     1     9 A                  1     5     2         3      3             0</span></span>
<span><span class="co">#&gt;  9     1     9 A                  1     7     3         2      3             0</span></span>
<span><span class="co">#&gt; 10     1     9 A                  1     4     2         2      4             0</span></span>
<span><span class="co">#&gt; # ℹ 499 more rows</span></span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/poissonconsulting/bboutools/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/poissonconsulting/bboutools/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (== 2.0) | file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing bbousims</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Seb Dalgarno <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-3658-4517" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Joe Thorley <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-7683-4592" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/poissonconsulting/bbousims/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/poissonconsulting/bbousims/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/poissonconsulting/bbousims?branch=main" class="external-link"><img src="https://codecov.io/gh/poissonconsulting/bbousims/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Seb Dalgarno, Joe Thorley.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
